(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{348:function(t,e,n){"use strict";n.r(e);n(92);var r=n(148),o=n(155),c=n(231),l=n(256),d=n(173),m=n(254),h=n(255),y={components:{DailyReportCommentList:m.a,DailyReportCommentForm:h.a},props:["currentUser","accessKey"],data:function(){return{dailyReportId:null,title:"",content:"",didFind:!1,dailyReportCommentVersion:Date.now()}},mounted:function(){var t=this,e=new l.a,n=new d.a;e.fetch(this.accessKey).then(function(e){var r=e.userId,o=e.dailyReportId;return t.dailyReportId=o,n.fetch(r,o)}).then(function(e){t.title="".concat(e.date," ").concat(e.title),t.content=Object(c.a)(e.content),t.didFind=!0}).catch(function(){console.fatal("日報が見つかりません")})},methods:{updateDailyReportCommentVersion:function(){this.dailyReportCommentVersion=Date.now()}}},f=(n(197),n(18)),v=Object(f.a)(y,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.didFind?[n("article",[n("h1",[t._v(t._s(t.title))]),t._v(" "),n("main",{domProps:{innerHTML:t._s(t.content)}})]),t._v(" "),n("h2",{staticClass:"u-mt--1rem"},[t._v("コメント")]),t._v(" "),n("DailyReportCommentForm",{attrs:{"current-user":t.currentUser,"daily-report-id":t.dailyReportId},on:{submitted:t.updateDailyReportCommentVersion}}),t._v(" "),n("DailyReportCommentList",{staticClass:"u-mt--1rem",attrs:{"current-user":t.currentUser,"daily-report-id":t.dailyReportId,version:t.dailyReportCommentVersion}})]:n("div",[t._v("\n    日報が見つかりませんでした\n  ")])],2)},[],!1,null,null,null).exports,_=n(156),R={components:{MainHeader:o.a,DailyReportPublicDetail:v,MainFooter:_.a},data:function(){return{currentUser:null}},mounted:function(){var t=this;"open_app"==this.$route.query.testMode&&navigator.userAgent.match(/(iPhone|iPod|Android)/i)&&confirm("アプリで開きますか?")&&(location.href="nippohub://daily_report/".concat(this.$route.params.access_key)),(new r.a).fetch().then(function(e){t.currentUser=e})}},C=Object(f.a)(R,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("main-header",{attrs:{currentUser:this.currentUser}}),this._v(" "),e("div",{staticClass:"l-container"},[e("DailyReportPublicDetail",{attrs:{"access-key":this.$route.params.access_key,currentUser:this.currentUser}})],1),this._v(" "),e("main-footer")],1)},[],!1,null,null,null);e.default=C.exports}}]);