(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{148:function(t,e,n){"use strict";n(14);var r=n(145),o=n(151),c=n(149),l=function t(e,n){Object(r.a)(this,t),this.id=e,this.email=n};n.d(e,"a",function(){return d});var d=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"fetch",value:function(){return new Promise(function(t,e){c.a.auth().onAuthStateChanged(function(e){t(null!=e?new l(e.uid,e.email):null)})})}},{key:"create",value:function(t,e){return c.a.auth().createUserWithEmailAndPassword(t,e)}},{key:"authorize",value:function(t,e){return c.a.auth().signInWithEmailAndPassword(t,e)}},{key:"clearSession",value:function(){return c.a.auth().signOut()}}]),t}()},149:function(t,e,n){"use strict";var r=n(175),o=n.n(r),c=(n(178),n(179),{apiKey:"AIzaSyDgw7znG2kgpYAH6UPXF1k72zjpnYV7zRg",authDomain:"nippohub-daily-prod.firebaseapp.com",databaseURL:"https://nippohub-daily-prod.firebaseio.com",projectId:"nippohub-daily-prod",storageBucket:"",messagingSenderId:"729594218139"});0===o.a.apps.length&&o.a.initializeApp(c),e.a=o.a},161:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(145),o=n(151),c=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,null,[{key:"dateToString",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function(t){return"0".concat(t).slice(-2)};return e?"".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate())," ").concat(n(t.getHours()),":").concat(n(t.getMinutes())):"".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate()))}}]),t}()},167:function(t,e,n){"use strict";n(14);var r=n(145),o=n(151),c=n(149),l=n(161),d=function t(e,n,title,content,o){Object(r.a)(this,t),this.id=e,this.date=n,this.title=title,this.content=content,this.accessKey=o};n.d(e,"a",function(){return f});var f=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"fetchList",value:function(t,e,n){var r=c.a.database().ref("users/".concat(t,"/daily_reports/")).orderByChild("date");return null!=e&&(r=r.startAt(l.a.dateToString(e,!1))),null!=n&&(r=r.endAt(l.a.dateToString(n,!1))),r.once("value").then(function(t){var e=t.val(),n=[];for(var r in e){var o=e[r];n.push(new d(r,o.date,o.title,o.content,o.access_key))}return n.sort(function(t,e){return t.date<e.date?-1:t.date===e.date?0:1}).reverse()})}},{key:"fetch",value:function(t,e){return c.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).once("value").then(function(t){var e=t.val();if(null!=e)return new d(e.Id,e.date,e.title,e.content,e.access_key);Promise.reject()})}},{key:"create",value:function(t,e,title,content){return c.a.database().ref("users/".concat(t,"/daily_reports")).push({date:e,title:title,content:content,createdAt:Date.now()})}},{key:"update",value:function(t,e,n,title,content){return c.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).update({date:n,title:title,content:content})}},{key:"updateAccessKey",value:function(t,e,n){return c.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).update({access_key:n})}},{key:"delete",value:function(t,e){return c.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).remove()}}]),t}()},359:function(t,e,n){"use strict";n.r(e);n(66),n(26),n(27);var r=n(333),o=n.n(r),c=n(148),l=(n(167),{data:function(){return{jsonComments:null}},methods:{submit:function(){var t=this;(new c.a).fetch().then(function(e){var n=o.a.database().ref("users/".concat(e.id,"/daily_reports/")),r={};return n.once("value").then(function(t){var e=t.val();for(var n in e){var o=e[n];r[o.date]=n}return r}).then(function(n){var r=JSON.parse(t.jsonComments),c=!0,l=!1,d=void 0;try{for(var f,v=function(){var t=f.value,r=t.date,c=n[r];t.comments.forEach(function(t){return o.a.database().ref("/daily_reports/".concat(c,"/comments")).push({user_id:e.id,content:t.content,post_at:t.created_at,created_at:t.created_at})})},h=r[Symbol.iterator]();!(c=(f=h.next()).done);c=!0)v()}catch(t){l=!0,d=t}finally{try{c||null==h.return||h.return()}finally{if(l)throw d}}alert("done")})})}}}),d=n(18),component=Object(d.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.jsonComments,expression:"jsonComments"}],domProps:{value:t.jsonComments},on:{input:function(e){e.target.composing||(t.jsonComments=e.target.value)}}}),t._v(" "),n("button",{on:{click:t.submit}},[t._v("送信")])])},[],!1,null,null,null);e.default=component.exports}}]);