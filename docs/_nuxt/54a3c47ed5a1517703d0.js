(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{146:function(t,e,n){var content=n(158);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("6add6edb",content,!0,{sourceMap:!1})},147:function(t,e,n){var content=n(160);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("6224379b",content,!0,{sourceMap:!1})},148:function(t,e,n){"use strict";n(14);var r=n(145),o=n(153),c=n(150),l=function t(e,n){Object(r.a)(this,t),this.id=e,this.email=n};n.d(e,"a",function(){return d});var d=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"fetch",value:function(){return new Promise(function(t,e){c.a.auth().onAuthStateChanged(function(e){t(null!=e?new l(e.uid,e.email):null)})})}},{key:"create",value:function(t,e){return c.a.auth().createUserWithEmailAndPassword(t,e)}},{key:"authorize",value:function(t,e){return c.a.auth().signInWithEmailAndPassword(t,e)}},{key:"clearSession",value:function(){return c.a.auth().signOut()}}]),t}()},149:function(t,e,n){var content=n(172);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("2bfdbba2",content,!0,{sourceMap:!1})},150:function(t,e,n){"use strict";var r=n(175),o=n.n(r),c=(n(177),n(178),{apiKey:"AIzaSyDgw7znG2kgpYAH6UPXF1k72zjpnYV7zRg",authDomain:"nippohub-daily-prod.firebaseapp.com",databaseURL:"https://nippohub-daily-prod.firebaseio.com",projectId:"nippohub-daily-prod",storageBucket:"",messagingSenderId:"729594218139"});0===o.a.apps.length&&o.a.initializeApp(c),e.a=o.a},155:function(t,e,n){"use strict";var r=n(148),o={props:["currentUser"],methods:{signOut:function(){(new r.a).clearSession().then(function(){return location.href="/"})}}},c=(n(157),n(18)),component=Object(c.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"p-header"},[n("div",{staticClass:"p-header__container"},[n("h1",{staticClass:"p-page-title"},[n("nuxt-link",{attrs:{to:"/"}},[t._v("NippoHub")])],1),t._v(" "),n("nav",[n("ul",{staticClass:"p-auth-links"},[null!=t.currentUser?n("li",{staticClass:"p-auth-links__item",on:{click:t.signOut}},[t._v("Sign out")]):[n("li",{staticClass:"p-auth-links__item"},[n("nuxt-link",{attrs:{to:"/sign_in"}},[t._v("Sign in")])],1),t._v(" "),n("li",{staticClass:"p-auth-links__item"},[n("nuxt-link",{attrs:{to:"/sign_up"}},[t._v("Sign up")])],1)]],2)])])])},[],!1,null,null,null);e.a=component.exports},156:function(t,e,n){"use strict";n(159);var r=n(18),component=Object(r.a)({},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"p-footer"},[e("div",[e("span",[this._v("\n      ©NippoHub\n    ")]),this._v(" "),e("nuxt-link",{attrs:{to:"/agreements",target:"_blank"}},[this._v("利用規約")]),this._v(" "),e("nuxt-link",{attrs:{to:"/privacy",target:"_blank"}},[this._v("プライバシーポリシー")])],1)])},[],!1,null,null,null);e.a=component.exports},157:function(t,e,n){"use strict";var r=n(146);n.n(r).a},158:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-header{padding:.5rem 0;box-shadow:0 3px 5px rgba(0,0,0,.1)}.p-header__container{display:flex;justify-content:space-between;align-items:center;width:640px;margin:0 auto}.p-page-title{margin:0;font-size:1.5rem}.p-page-title a{color:#000;text-decoration:none}.p-auth-links{list-style-type:none;padding:0;margin:0}.p-auth-links__item{display:inline-block}.p-auth-links__item:nth-of-type(n+2){margin-left:.5rem}@media(max-width:640px){.p-header__container{width:100%;padding:0 1.5rem;box-sizing:border-box}}",""])},159:function(t,e,n){"use strict";var r=n(147);n.n(r).a},160:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-footer div{margin:0 auto;width:640px}@media(max-width:640px){.p-footer div{width:100%;padding:0 1.5rem;box-sizing:border-box}}",""])},163:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(145),o=n(153),c=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,null,[{key:"dateToString",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function(t){return"0".concat(t).slice(-2)};return e?"".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate())," ").concat(n(t.getHours()),":").concat(n(t.getMinutes())):"".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate()))}}]),t}()},164:function(t,e,n){var content=n(192);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("9bfcc092",content,!0,{sourceMap:!1})},165:function(t,e,n){var content=n(194);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("24bfbbfc",content,!0,{sourceMap:!1})},166:function(t,e,n){var content=n(196);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("da02b386",content,!0,{sourceMap:!1})},171:function(t,e,n){"use strict";var r=n(149);n.n(r).a},172:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".u-mt-075{margin-top:.75em}.u-mt--1rem{margin-top:1rem}.u-mt--2rem{margin-top:2rem}.u-mt--3rem{margin-top:3rem}.u-text-align--right,.u-text-align-right{text-align:right}",""])},173:function(t,e,n){"use strict";n(14);var r=n(145),o=n(153),c=n(150),l=n(163),d=function t(e,n,title,content,o){Object(r.a)(this,t),this.id=e,this.date=n,this.title=title,this.content=content,this.accessKey=o};n.d(e,"a",function(){return m});var m=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"fetchList",value:function(t,e,n){var r=c.a.database().ref("users/".concat(t,"/daily_reports/")).orderByChild("date");return null!=e&&(r=r.startAt(l.a.dateToString(e,!1))),null!=n&&(r=r.endAt(l.a.dateToString(n,!1))),r.once("value").then(function(t){var e=t.val(),n=[];for(var r in e){var o=e[r];n.push(new d(r,o.date,o.title,o.content,o.access_key))}return n.sort(function(t,e){return t.date<e.date?-1:t.date===e.date?0:1}).reverse()})}},{key:"fetch",value:function(t,e){return c.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).once("value").then(function(t){var e=t.val();if(null!=e)return new d(e.Id,e.date,e.title,e.content,e.access_key);Promise.reject()})}},{key:"create",value:function(t,e,title,content){return c.a.database().ref("users/".concat(t,"/daily_reports")).push({date:e,title:title,content:content,createdAt:Date.now()})}},{key:"update",value:function(t,e,n,title,content){return c.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).update({date:n,title:title,content:content})}},{key:"updateAccessKey",value:function(t,e,n){return c.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).update({access_key:n})}},{key:"delete",value:function(t,e){return c.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).remove()}}]),t}()},181:function(t,e,n){var content=n(233);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("7e9dd605",content,!0,{sourceMap:!1})},191:function(t,e,n){"use strict";var r=n(164);n.n(r).a},192:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-oneline-input{height:2.5em;padding:.25em .5em;outline:none;border:.1em solid #ddd;border-radius:.3em;box-sizing:border-box}",""])},193:function(t,e,n){"use strict";var r=n(165);n.n(r).a},194:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-btn,.p-submit{background-color:#fff;border:.1em solid #ddd;border-radius:.3em;padding:.25em 2em}",""])},195:function(t,e,n){"use strict";var r=n(166);n.n(r).a},196:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-daily-report-form__title-area{display:flex}.p-daily-report-form__title-area__date-form{flex:0 0 auto}.p-daily-report-form__title-area__title-form{flex:1 0 auto;margin-left:1em}.p-daily-report-form__content-form{width:100%;resize:vertical;box-sizing:border-box;border:.1em solid #ddd;border-radius:.3em;padding:.5em;height:10em;outline:none}@media(max-width:640px){.p-daily-report-form__date-form{width:100%}.p-daily-report-form__title-form{width:100%;margin:1rem 0 0}}",""])},197:function(t,e,n){"use strict";var r=n(181);n.n(r).a},231:function(t,e,n){"use strict";var r=n(333),o=n.n(r);o.a.setOptions({sanitize:!0}),e.a=o.a},232:function(t,e,n){var content=n(335);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("08430973",content,!0,{sourceMap:!1})},233:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".u-mt-075{margin-top:.75em}.u-mt--1rem{margin-top:1rem}.u-mt--2rem{margin-top:2rem}.u-mt--3rem{margin-top:3rem}.u-text-align--right,.u-text-align-right{text-align:right}",""])},254:function(t,e,n){"use strict";var r=n(231),o=n(257),c=n(163),l={data:function(){return{dailyReportComments:[]}},props:["currentUser","dailyReportId","version"],watch:{version:function(){var t=this;return(new o.a).fetch(this.dailyReportId).then(function(e){return t.dailyReportComments=e})}},mounted:function(){var t=this;return(new o.a).fetch(this.dailyReportId).then(function(e){return t.dailyReportComments=e})},methods:{dateToString:function(t){return c.a.dateToString(t)},parseMD:function(content){return Object(r.a)(content)},destroy:function(t){var e=this,n=t.currentTarget.dataset.commentId;(new o.a).delete(this.dailyReportId,n).then(function(){e.dailyReportComments=e.dailyReportComments.filter(function(t){return t.id!=n})})}}},d=(n(334),n(18)),component=Object(d.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"p-daily-report-comment-list"},t._l(t.dailyReportComments,function(e){return n("li",{staticClass:"p-daily-report-comment-list__item"},[n("div",{staticClass:"p-daily-report-comment-list__item__date"},[t._v(t._s(t.dateToString(e.postAt)))]),t._v(" "),n("div",{staticClass:"p-daily-report-comment-list__item__content",domProps:{innerHTML:t._s(t.parseMD(e.content))}}),t._v(" "),t.currentUser.id==e.userId?n("a",{attrs:{href:"#","data-comment-id":e.id},on:{click:function(e){return e.preventDefault(),t.destroy(e)}}},[t._v("削除")]):t._e()])}),0)},[],!1,null,null,null);e.a=component.exports},255:function(t,e,n){"use strict";var r=n(257),o={props:["currentUser","dailyReportId"],data:function(){return{content:""}},methods:{post:function(){var t=this;null!=this.currentUser&&(new r.a).create(this.currentUser,this.dailyReportId,this.content).then(function(){t.content="",t.$emit("submitted")}).catch(function(t){alert("送信に失敗しました"),console.fatal(t)})}}},c=(n(191),n(193),n(195),n(171),n(18)),component=Object(c.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"p-daily-report-form",on:{submit:function(e){return e.preventDefault(),t.post(e)}}},[n("div",{staticClass:"u-mt-075",staticStyle:{"line-height":"1"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"p-daily-report-form__content-form",attrs:{name:"content",placeholder:"コメント"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),t._m(0)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"u-text-align-right u-mt-075"},[e("button",{staticClass:"p-submit",attrs:{type:"submit"}},[this._v("送信")])])}],!1,null,null,null);e.a=component.exports},256:function(t,e,n){"use strict";n(14);var r=n(145),o=n(153),c=n(150),l=function t(e,n){Object(r.a)(this,t),this.userId=e,this.dailyReportId=n};n.d(e,"a",function(){return d});var d=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"fetch",value:function(t){return c.a.database().ref("/access_keys/".concat(t)).once("value").then(function(t){var e=t.val();if(null!=e)return new l(e.user_id,e.daily_report_id);Promise.reject()})}},{key:"create",value:function(t,e){return c.a.database().ref("access_keys").push({user_id:t,daily_report_id:e}).then(function(t){return t.key})}},{key:"delete",value:function(t){return c.a.database().ref("/access_keys/".concat(t)).remove()}}]),t}()},257:function(t,e,n){"use strict";var r=n(145),o=n(153),c=n(150),l=function t(e,content,n,o){Object(r.a)(this,t),this.id=e,this.content=content,this.userId=n,this.postAt=o};n.d(e,"a",function(){return d});var d=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"fetch",value:function(t){return c.a.database().ref("/daily_reports/".concat(t,"/comments")).once("value").then(function(t){var e=t.val(),n=[];for(var r in e){var o=e[r],c=new Date(o.post_at);n.push(new l(r,o.content,o.user_id,c))}return n.sort(function(t,e){return t.postAt<e.postAt?-1:t.postAt===e.postAt?0:1}).reverse()})}},{key:"create",value:function(t,e,content){return c.a.database().ref("/daily_reports/".concat(e,"/comments")).push({user_id:t.id,content:content,post_at:Date.now(),created_at:Date.now()})}},{key:"delete",value:function(t,e){return c.a.database().ref("/daily_reports/".concat(t,"/comments/").concat(e)).remove()}}]),t}()},334:function(t,e,n){"use strict";var r=n(232);n.n(r).a},335:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".u-mt-05{margin-top:.5em}.p-daily-report-comment-list{margin:0;padding:0;list-style-type:none;border-top:.1em solid #ddd;border-bottom:.1em solid #ddd}.p-daily-report-comment-list__item{padding:.5em 1.5em}.p-daily-report-comment-list__item h1,.p-daily-report-comment-list__item h2,.p-daily-report-comment-list__item h3,.p-daily-report-comment-list__item p,.p-daily-report-comment-list__item ul{padding:0;margin:0}.p-daily-report-comment-list__item__date{font-size:.7em}.p-daily-report-comment-list__item__content{font-size:1em;margin-top:.7em}.p-daily-report-comment-list__item:nth-last-of-type(n+2){border-bottom:.1em solid #ddd}",""])}}]);