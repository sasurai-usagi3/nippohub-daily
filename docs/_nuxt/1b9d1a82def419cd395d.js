(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{162:function(e,t,n){var content=n(190);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(51).default)("67c5c354",content,!0,{sourceMap:!1})},189:function(e,t,n){"use strict";var r=n(162);n.n(r).a},190:function(e,t,n){(e.exports=n(50)(!1)).push([e.i,".p-oneline-input{height:2.5em;padding:.25em .5em;outline:none;border:.1em solid #ddd;border-radius:.3em;box-sizing:border-box}",""])},234:function(e,t,n){var content=n(337);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(51).default)("546bf97b",content,!0,{sourceMap:!1})},235:function(e,t,n){var content=n(339);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(51).default)("cb8c3b86",content,!0,{sourceMap:!1})},336:function(e,t,n){"use strict";var r=n(234);n.n(r).a},337:function(e,t,n){(e.exports=n(50)(!1)).push([e.i,".p-share-link{display:flex}.p-share-link__url{flex:1 0 auto}.p-share-link__disable-btn{margin-left:1em}",""])},338:function(e,t,n){"use strict";var r=n(235);n.n(r).a},339:function(e,t,n){(e.exports=n(50)(!1)).push([e.i,".p-btn,.p-submit{background-color:#fff;border:.1em solid #ddd;border-radius:.3em;padding:.25em 2em}",""])},347:function(e,t,n){"use strict";n.r(t);var r=n(148),c=n(155),o=n(231),l=n(173),d=n(256),h={props:["currentUser","dailyReportId","initAccessKey"],data:function(){return{accessKey:null}},methods:{generateAccessKey:function(){var e=this,t=new d.a,n=new l.a;null!=this.currentUser.id&&null==this.accessKey&&t.create(this.currentUser.id,this.dailyReportId).then(function(t){return e.accessKey=t,n.updateAccessKey(e.currentUser.id,e.dailyReportId,t)}).catch(function(){console.fatal("更新に失敗しました")})},dismissAccessKey:function(){var e=this,t=new d.a,n=new l.a;null!=this.currentUser.id&&null!=this.accessKey&&n.updateAccessKey(this.currentUser.id,this.dailyReportId,null).then(function(){var n=e.accessKey;return e.accessKey=null,t.delete(n)}).catch(function(){console.fatal("更新に失敗しました")})}},mounted:function(){this.accessKey=this.initAccessKey}},m=(n(336),n(189),n(338),n(18)),y=Object(m.a)(h,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[null!=e.accessKey?n("div",{staticClass:"p-share-link"},[n("span",[e._v("共有URL: ")]),e._v(" "),n("input",{staticClass:"p-share-link__url p-oneline-input",attrs:{type:"text",readonly:""},domProps:{value:"https://nippohub.com/daily_reports/public/"+e.accessKey}}),e._v(" "),n("button",{staticClass:"p-share-link__disable-btn p-submit",attrs:{type:"button"},on:{click:e.dismissAccessKey}},[e._v("プライベートにする")])]):n("button",{staticClass:"p-submit",attrs:{type:"button"},on:{click:e.generateAccessKey}},[e._v("共有する")])])},[],!1,null,null,null).exports,f=n(254),v=n(255),_={components:{ShareLink:y,DailyReportCommentList:f.a,DailyReportCommentForm:v.a},props:["currentUser","dailyReportId"],data:function(){return{title:"",content:"",accessKey:null,didFind:!1,dailyReportCommentVersion:Date.now()}},mounted:function(){var e=this;null!=this.currentUser&&(new l.a).fetch(this.currentUser.id,this.dailyReportId).then(function(t){e.title="".concat(t.date," ").concat(t.title),e.content=Object(o.a)(t.content),e.accessKey=t.accessKey,e.didFind=!0}).catch(function(){console.fatal("日報が見つかりません")})},methods:{updateDailyReportCommentVersion:function(){this.dailyReportCommentVersion=Date.now()}}},K=(n(197),Object(m.a)(_,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.didFind?n("div",[n("share-link",{attrs:{"current-user":e.currentUser,"daily-report-id":e.dailyReportId,"init-access-key":e.accessKey}}),e._v(" "),n("article",[n("h1",[e._v(e._s(e.title))]),e._v(" "),n("main",{domProps:{innerHTML:e._s(e.content)}})]),e._v(" "),n("h2",{staticClass:"u-mt--1rem"},[e._v("コメント")]),e._v(" "),n("DailyReportCommentForm",{attrs:{"current-user":e.currentUser,"daily-report-id":e.dailyReportId},on:{submitted:e.updateDailyReportCommentVersion}}),e._v(" "),n("DailyReportCommentList",{staticClass:"u-mt--1rem",attrs:{"current-user":e.currentUser,"daily-report-id":e.dailyReportId,version:e.dailyReportCommentVersion}})],1):e._e()])},[],!1,null,null,null).exports),R=n(156),U={components:{MainHeader:c.a,DailyReportDetail:K,MainFooter:R.a},data:function(){return{currentUser:null}},mounted:function(){var e=this;(new r.a).fetch().then(function(t){e.currentUser=t})}},C=Object(m.a)(U,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("main-header",{attrs:{currentUser:this.currentUser}}),this._v(" "),t("div",{staticClass:"l-container"},[null!=this.currentUser?t("DailyReportDetail",{attrs:{"daily-report-id":this.$route.params.id,"current-user":this.currentUser}}):this._e()],1),this._v(" "),t("main-footer")],1)},[],!1,null,null,null);t.default=C.exports}}]);