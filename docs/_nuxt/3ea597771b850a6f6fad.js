(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{145:function(t,e,n){var content=n(152);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("6add6edb",content,!0,{sourceMap:!1})},146:function(t,e,n){var content=n(154);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("6224379b",content,!0,{sourceMap:!1})},148:function(t,e,n){"use strict";n(14);var r=n(147),o=n(150),l=n(149),c=function t(e,n){Object(r.a)(this,t),this.id=e,this.email=n};n.d(e,"a",function(){return d});var d=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"fetch",value:function(){return new Promise(function(t,e){l.a.auth().onAuthStateChanged(function(e){t(null!=e?new c(e.uid,e.email):null)})})}},{key:"create",value:function(t,e){return l.a.auth().createUserWithEmailAndPassword(t,e)}},{key:"authorize",value:function(t,e){return l.a.auth().signInWithEmailAndPassword(t,e)}},{key:"clearSession",value:function(){return l.a.auth().signOut()}}]),t}()},149:function(t,e,n){"use strict";var r=n(168),o=n.n(r),l=(n(171),n(172),{apiKey:"AIzaSyDgw7znG2kgpYAH6UPXF1k72zjpnYV7zRg",authDomain:"nippohub-daily-prod.firebaseapp.com",databaseURL:"https://nippohub-daily-prod.firebaseio.com",projectId:"nippohub-daily-prod",storageBucket:"",messagingSenderId:"729594218139"});0===o.a.apps.length&&o.a.initializeApp(l),e.a=o.a},151:function(t,e,n){"use strict";var r=n(145);n.n(r).a},152:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-header{padding:.5rem 0;box-shadow:0 3px 5px rgba(0,0,0,.1)}.p-header__container{display:flex;justify-content:space-between;align-items:center;width:640px;margin:0 auto}.p-page-title{margin:0;font-size:1.5rem}.p-page-title a{color:#000;text-decoration:none}.p-auth-links{list-style-type:none;padding:0;margin:0}.p-auth-links__item{display:inline-block}.p-auth-links__item:nth-of-type(n+2){margin-left:.5rem}@media(max-width:640px){.p-header__container{width:100%;padding:0 1.5rem;box-sizing:border-box}}",""])},153:function(t,e,n){"use strict";var r=n(146);n.n(r).a},154:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-footer div{margin:0 auto;width:640px}@media(max-width:640px){.p-footer div{width:100%;padding:0 1.5rem;box-sizing:border-box}}",""])},155:function(t,e,n){"use strict";var r=n(148),o={props:["currentUserId","currentUser"],methods:{signOut:function(){(new r.a).clearSession().then(function(){return location.href="/"})}}},l=(n(151),n(18)),component=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"p-header"},[n("div",{staticClass:"p-header__container"},[n("h1",{staticClass:"p-page-title"},[n("nuxt-link",{attrs:{to:"/"}},[t._v("NippoHub")])],1),t._v(" "),n("nav",[n("ul",{staticClass:"p-auth-links"},[null!=t.currentUser||null!=t.currentUserId?n("li",{staticClass:"p-auth-links__item",on:{click:t.signOut}},[t._v("Sign out")]):[n("li",{staticClass:"p-auth-links__item"},[n("nuxt-link",{attrs:{to:"/sign_in"}},[t._v("Sign in")])],1),t._v(" "),n("li",{staticClass:"p-auth-links__item"},[n("nuxt-link",{attrs:{to:"/sign_up"}},[t._v("Sign up")])],1)]],2)])])])},[],!1,null,null,null);e.a=component.exports},156:function(t,e,n){"use strict";n(153);var r=n(18),component=Object(r.a)({},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"p-footer"},[e("div",[e("span",[this._v("\n      ©NippoHub\n    ")]),this._v(" "),e("nuxt-link",{attrs:{to:"/agreements",target:"_blank"}},[this._v("利用規約")]),this._v(" "),e("nuxt-link",{attrs:{to:"/privacy",target:"_blank"}},[this._v("プライバシーポリシー")])],1)])},[],!1,null,null,null);e.a=component.exports},159:function(t,e,n){var content=n(177);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("2bfdbba2",content,!0,{sourceMap:!1})},161:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(147),o=n(150),l=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,null,[{key:"dateToString",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function(t){return"0".concat(t).slice(-2)};return e?"".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate())," ").concat(n(t.getHours()),":").concat(n(t.getMinutes())):"".concat(t.getFullYear(),"-").concat(n(t.getMonth()+1),"-").concat(n(t.getDate()))}}]),t}()},167:function(t,e,n){"use strict";n(14);var r=n(147),o=n(150),l=n(149),c=n(161),d=function t(e,n,title,content,o,l){Object(r.a)(this,t),this.id=e,this.date=n,this.title=title,this.content=content,this.createdAt=o,this.accessKey=l};n.d(e,"a",function(){return f});var f=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"fetchList",value:function(t,e,n){var r=l.a.database().ref("users/".concat(t,"/daily_reports/")).orderByChild("date");return null!=e&&(r=r.startAt(c.a.dateToString(e,!1))),null!=n&&(r=r.endAt(c.a.dateToString(n,!1))),r.once("value").then(function(t){var e=t.val(),n=[];for(var r in e){var o=e[r],l=new Date(o.createdAt);n.push(new d(r,o.date,o.title,o.content,c.a.dateToString(l),o.access_key))}return n.sort(function(t,e){return t.date<e.date?-1:t.date===e.date?0:1}).reverse()})}},{key:"fetch",value:function(t,e){return l.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).once("value").then(function(t){var e=t.val();if(null!=e){var n=new Date(e.createdAt);return new d(e.Id,e.date,e.title,e.content,c.a.dateToString(n),e.access_key)}Promise.reject()})}},{key:"create",value:function(t,e,title,content){return l.a.database().ref("users/".concat(t,"/daily_reports")).push({date:e,title:title,content:content,createdAt:Date.now()})}},{key:"update",value:function(t,e,n,title,content){return l.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).update({date:n,title:title,content:content})}},{key:"updateAccessKey",value:function(t,e,n){return l.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).update({access_key:n})}},{key:"delete",value:function(t,e){return l.a.database().ref("users/".concat(t,"/daily_reports/").concat(e)).remove()}}]),t}()},176:function(t,e,n){"use strict";var r=n(159);n.n(r).a},177:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".u-mt-075{margin-top:.75em}.u-mt--2rem{margin-top:2rem}.u-mt--3rem{margin-top:3rem}.u-text-align--right,.u-text-align-right{text-align:right}",""])},178:function(t,e,n){var content=n(229);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("9bfcc092",content,!0,{sourceMap:!1})},179:function(t,e,n){var content=n(231);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("24bfbbfc",content,!0,{sourceMap:!1})},180:function(t,e,n){var content=n(233);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("da02b386",content,!0,{sourceMap:!1})},228:function(t,e,n){"use strict";var r=n(178);n.n(r).a},229:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-oneline-input{height:2.5em;padding:.25em .5em;outline:none;border:.1em solid #ddd;border-radius:.3em;box-sizing:border-box}",""])},230:function(t,e,n){"use strict";var r=n(179);n.n(r).a},231:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-btn,.p-submit{background-color:#fff;border:.1em solid #ddd;border-radius:.3em;padding:.25em 2em}",""])},232:function(t,e,n){"use strict";var r=n(180);n.n(r).a},233:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-daily-report-form__title-area{display:flex}.p-daily-report-form__title-area__date-form{flex:0 0 auto}.p-daily-report-form__title-area__title-form{flex:1 0 auto;margin-left:1em}.p-daily-report-form__content-form{width:100%;resize:vertical;box-sizing:border-box;border:.1em solid #ddd;border-radius:.3em;padding:.5em;height:10em;outline:none}@media(max-width:640px){.p-daily-report-form__date-form{width:100%}.p-daily-report-form__title-form{width:100%;margin:1rem 0 0}}",""])},234:function(t,e,n){var content=n(340);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("9da3fc9a",content,!0,{sourceMap:!1})},235:function(t,e,n){var content=n(341);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("7e9dd605",content,!0,{sourceMap:!1})},236:function(t,e,n){var content=n(343);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("2907cf9f",content,!0,{sourceMap:!1})},237:function(t,e,n){var content=n(345);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(51).default)("8f2f1038",content,!0,{sourceMap:!1})},238:function(t,e,n){"use strict";var r=n(161),o=n(167),l={props:["currentUser","currentUserId","dailyReportId"],data:function(){return{date:"",title:"",content:""}},methods:{post:function(){var t=this,e=new o.a,n=new Date;if(null!=this.currentUserId||null!=this.currentUser){var l=null!=this.currentUser?this.currentUser.id:this.currentUserId;null!=this.dailyReportId?e.update(l,this.dailyReportId,this.date,this.title,this.content).then(function(){return location.href="/"}):e.create(l,this.date,this.title,this.content).then(function(){t.date=r.a.dateToString(n,!1),t.title="",t.content="",t.$emit("submitted")})}}},mounted:function(){var t=this,e=new o.a,n=new Date;if(null==this.currentUser&&null==this.currentUserId||null==this.dailyReportId)this.date=r.a.dateToString(n,!1);else{var l=null!=this.currentUser?this.currentUser.id:this.currentUserId;e.fetch(l,this.dailyReportId).then(function(e){t.date=e.date,t.title=e.title,t.content=e.content}).catch(function(){console.fatal("日報が見つかりません")})}}},c=(n(228),n(230),n(232),n(176),n(18)),component=Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"p-daily-report-form",on:{submit:function(e){return e.preventDefault(),t.post(e)}}},[n("div",{staticClass:"p-daily-report-form__title-area"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.date,expression:"date"}],staticClass:"p-oneline-input p-daily-report-form__title-area__date-form",attrs:{type:"date",placeholder:"日付"},domProps:{value:t.date},on:{input:function(e){e.target.composing||(t.date=e.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"p-oneline-input p-daily-report-form__title-area__title-form",attrs:{type:"text",placeholder:"title"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"u-mt-075",staticStyle:{"line-height":"1"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"p-daily-report-form__content-form",attrs:{name:"content"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),t._m(0)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"u-text-align-right u-mt-075"},[e("button",{staticClass:"p-submit",attrs:{type:"submit"}},[this._v("送信")])])}],!1,null,null,null);e.a=component.exports},255:function(t,e,n){"use strict";var r=n(235);n.n(r).a},339:function(t,e,n){"use strict";var r=n(234);n.n(r).a},340:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-daily-report-list{margin:0;padding:0;list-style-type:none;border-top:.1em solid #ddd;border-bottom:.1em solid #ddd}.p-daily-report-list__item{display:flex;justify-content:space-between;align-items:center;padding:.5em 1.5em}.p-daily-report-list__item:nth-last-of-type(n+2){border-bottom:.1em solid #ddd}h3{margin:0}.u-mt-05{margin-top:.5em}",""])},341:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".u-mt-075{margin-top:.75em}.u-mt--2rem{margin-top:2rem}.u-mt--3rem{margin-top:3rem}.u-text-align--right,.u-text-align-right{text-align:right}",""])},342:function(t,e,n){"use strict";var r=n(236);n.n(r).a},343:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".p-sub-title{font-size:1.25rem;margin:0}",""])},344:function(t,e,n){"use strict";var r=n(237);n.n(r).a},345:function(t,e,n){(t.exports=n(50)(!1)).push([t.i,".u-mt-075{margin-top:.75em}.u-mt--2rem{margin-top:2rem}.u-mt--3rem{margin-top:3rem}.u-text-align--right,.u-text-align-right{text-align:right}",""])},346:function(t,e,n){"use strict";n.r(e);var r=n(155),o=n(238),l=n(35),c=n(167),d=function(t,e,n){var r=new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),o=new Date(t.getFullYear(),t.getMonth()+1,0,0,0,0,0);return[null!=e?new Date(e):r,null!=n?new Date(n):o]},f=function(t,e,n){if(null!=t)return(new c.a).fetchList(t.id,e,n)},h={props:["currentUser","startDate","endDate","version"],data:function(){return{dailyReports:[]}},watch:{startDate:function(){var t=this,e=d(new Date,this.startDate,this.endDate),n=Object(l.a)(e,2),r=n[0],o=n[1];f(this.currentUser,r,o).then(function(e){return t.dailyReports=e})},endDate:function(){var t=this,e=d(new Date,this.startDate,this.endDate),n=Object(l.a)(e,2),r=n[0],o=n[1];f(this.currentUser,r,o).then(function(e){return t.dailyReports=e})},version:function(){var t=this,e=d(new Date,this.startDate,this.endDate),n=Object(l.a)(e,2),r=n[0],o=n[1];f(this.currentUser,r,o).then(function(e){return t.dailyReports=e})}},mounted:function(){var t=this,e=d(new Date,this.startDate,this.endDate),n=Object(l.a)(e,2),r=n[0],o=n[1];f(this.currentUser,r,o).then(function(e){return t.dailyReports=e})}},m=(n(339),n(18)),v=Object(m.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{key:t.startDate+"_"+t.endDate,staticClass:"p-daily-report-list u-mt-05"},t._l(t.dailyReports,function(e){return n("li",{staticClass:"p-daily-report-list__item"},[n("nuxt-link",{attrs:{to:"/daily_reports/"+e.id}},[n("h3",[t._v(t._s(e.date)+" "+t._s(e.title))])]),t._v(" "),n("nuxt-link",{attrs:{to:"/daily_reports/"+e.id+"/edit"}},[t._v("編集")])],1)}),0)},[],!1,null,null,null).exports,_=n(161),y={props:["basisDate"],computed:{firstDateOfPrevMonth:function(){return null!=this.basisDate?_.a.dateToString(new Date(this.basisDate.getFullYear(),this.basisDate.getMonth()-1,1,0,0,0,0),!1):""},endDateOfPrevMonth:function(){return null!=this.basisDate?_.a.dateToString(new Date(this.basisDate.getFullYear(),this.basisDate.getMonth(),0,0,0,0,0),!1):""},firstDateOfNextMonth:function(){return null!=this.basisDate?_.a.dateToString(new Date(this.basisDate.getFullYear(),this.basisDate.getMonth()+1,1,0,0,0,0),!1):""},endDateOfNextMonth:function(){return null!=this.basisDate?_.a.dateToString(new Date(this.basisDate.getFullYear(),this.basisDate.getMonth()+2,0,0,0,0,0),!1):""}}},D=(n(255),Object(m.a)(y,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"u-mt--2rem",staticStyle:{display:"flex","justify-content":"space-between"}},[e("nuxt-link",{attrs:{to:{path:"/",query:{start_at:this.firstDateOfPrevMonth,end_at:this.endDateOfPrevMonth}}}},[this._v("< 先月")]),this._v(" "),e("nuxt-link",{attrs:{to:{path:"/",query:{start_at:this.firstDateOfNextMonth,end_at:this.endDateOfNextMonth}}}},[this._v("次月 >")])],1)},[],!1,null,null,null).exports),x={props:["startDate","endDate"],computed:{startDateStr:function(){return _.a.dateToString(this.startDate,!1)},endDateStr:function(){return _.a.dateToString(this.endDate,!1)}}},w=Object(m.a)(x,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"u-text-align--right",attrs:{action:"/"}},[n("span",[t._v("表示範囲")]),t._v(" "),n("input",{attrs:{type:"hidden",name:"no_link",value:"true"}}),t._v(" "),n("input",{staticClass:"p-oneline-input",attrs:{type:"date",name:"start_at"},domProps:{value:t.startDateStr}}),t._v(" ~ "),n("input",{staticClass:"p-oneline-input",attrs:{type:"date",name:"end_at"},domProps:{value:t.endDateStr}}),t._v(" "),n("button",{staticClass:"p-submit",attrs:{type:"submit"}},[t._v("検索")])])},[],!1,null,null,null).exports,k=n(156),S=n(148),M={components:{DailyReportForm:o.a,DailyReportList:v,DailyReportListLink:D,DailyReportSearchForm:w,MainHeader:r.a,MainFooter:k.a},data:function(){var t=new Date,e=this.$route.query.start_at,n=this.$route.query.end_at,r=null!=e&&""!==e?new Date(Date.parse(e)):new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),o=null!=n&&""!==n?new Date(Date.parse(n)):new Date(t.getFullYear(),t.getMonth()+1,0,0,0,0,0);return{currentUser:null,dailyReportListVersion:Date.now(),firstDate:r,endDate:o}},watch:{$route:function(){var t=new Date,e=this.$route.query.start_at,n=this.$route.query.end_at;this.firstDate=null!=e&&""!==e?new Date(Date.parse(e)):new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),this.endDate=null!=n&&""!==n?new Date(Date.parse(n)):new Date(t.getFullYear(),t.getMonth()+1,0,0,0,0,0)}},computed:{firstDateStr:function(){return _.a.dateToString(this.firstDate,!1)},endDateStr:function(){return _.a.dateToString(this.endDate,!1)}},mounted:function(){var t=this;(new S.a).fetch().then(function(e){t.currentUser=e})},methods:{updateDailyReportListVersion:function(){this.dailyReportListVersion=Date.now()}}},U=(n(342),n(344),Object(m.a)(M,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("main-header",{attrs:{currentUser:t.currentUser}}),t._v(" "),null!=t.currentUser?n("div",{staticClass:"l-container"},[n("daily-report-search-form",{attrs:{"start-date":t.firstDate,"end-date":t.endDate}}),t._v(" "),n("div",{staticClass:"u-mt--3rem"},[n("daily-report-form",{attrs:{currentUser:t.currentUser},on:{submitted:t.updateDailyReportListVersion}})],1),t._v(" "),n("div",[n("h2",{staticClass:"p-sub-title"},[t._v(t._s(t.firstDateStr)+" ~ "+t._s(t.endDateStr)+" の日報")]),t._v(" "),n("daily-report-list",{attrs:{currentUser:t.currentUser,"start-date":t.firstDate,"end-date":t.endDate,version:t.dailyReportListVersion}}),t._v(" "),null==t.$route.query.no_link?n("daily-report-list-link",{attrs:{"basis-date":t.firstDate}}):t._e()],1)],1):t._e(),t._v(" "),n("main-footer")],1)},[],!1,null,null,null));e.default=U.exports}}]);